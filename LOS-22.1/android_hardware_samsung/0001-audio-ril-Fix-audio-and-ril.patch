From 9b3b6befe6066252b5325c656995bbb3e9c51935 Mon Sep 17 00:00:00 2001
From: Dominggoes Isakh <drjisakh@gmail.com>
Date: Sun, 8 Jun 2025 12:46:58 -0400
Subject: [PATCH] audio/ril: Fix audio and ril

Change-Id: I65110d643b5bbda917f0ee4cd71b19abe4c5b698
---
 audio/Android.mk                     |  6 ++---
 ril/libsecril-client/Android.mk      |  5 +++++
 ril/libsecril-client/Android.mk.orig | 33 ++++++++++++++++++++++++++++
 3 files changed, 41 insertions(+), 3 deletions(-)
 create mode 100755 ril/libsecril-client/Android.mk.orig

diff --git a/audio/Android.mk b/audio/Android.mk
index 813278d..da74592 100644
--- a/audio/Android.mk
+++ b/audio/Android.mk
@@ -40,16 +40,16 @@ LOCAL_SHARED_LIBRARIES := \
 	libdl \
 	libsecril-client
 
-
 LOCAL_C_INCLUDES += \
 	$(LOCAL_PATH)/include \
 	external/tinyalsa/include \
 	external/tinycompress/include \
 	hardware/libhardware/include \
-	hardware/samsung/ril/libsecril-client \
 	$(call include-path-for, audio-utils) \
 	$(call include-path-for, audio-route) \
-	$(call include-path-for, audio-effects)
+	$(call include-path-for, audio-effects) \
+	hardware/ril/include \
+	hardware/samsung/ril/libsecril-client
 
 LOCAL_CFLAGS := -Werror -Wall
 LOCAL_CFLAGS += -DPREPROCESSING_ENABLED
diff --git a/ril/libsecril-client/Android.mk b/ril/libsecril-client/Android.mk
index 4c6b7f5..d216677 100755
--- a/ril/libsecril-client/Android.mk
+++ b/ril/libsecril-client/Android.mk
@@ -14,6 +14,9 @@ LOCAL_SHARED_LIBRARIES := \
     liblog \
     librilutils
 
+LOCAL_C_INCLUDES += \
+    hardware/ril/include
+
 LOCAL_CFLAGS := 
 
 ifeq ($(TARGET_BOARD_PLATFORM),exynos4)
@@ -30,4 +33,6 @@ endif
 LOCAL_MODULE:= libsecril-client
 LOCAL_VENDOR_MODULE := true
 
+LOCAL_VENDOR_MODULE := true
+
 include $(BUILD_SHARED_LIBRARY)
diff --git a/ril/libsecril-client/Android.mk.orig b/ril/libsecril-client/Android.mk.orig
new file mode 100755
index 0000000..4c6b7f5
--- /dev/null
+++ b/ril/libsecril-client/Android.mk.orig
@@ -0,0 +1,33 @@
+# Copyright 2006 The Android Open Source Project
+
+LOCAL_PATH:= $(call my-dir)
+include $(CLEAR_VARS)
+
+LOCAL_SRC_FILES:= \
+    secril-client.cpp
+
+LOCAL_SHARED_LIBRARIES := \
+    libutils \
+    libbinder \
+    libcutils \
+    libhardware_legacy \
+    liblog \
+    librilutils
+
+LOCAL_CFLAGS := 
+
+ifeq ($(TARGET_BOARD_PLATFORM),exynos4)
+LOCAL_CFLAGS += -DRIL_CALL_AUDIO_PATH_EXTRAVOLUME
+endif
+ifneq ($(filter m7450 mdm9x35 ss333 xmm7260,$(BOARD_MODEM_TYPE)),)
+LOCAL_CFLAGS += -DSAMSUNG_NEXT_GEN_MODEM
+endif
+
+ifeq ($(TARGET_USES_VND_SECRIL), true)
+LOCAL_CFLAGS += -DUSES_VND_SECRIL
+endif
+
+LOCAL_MODULE:= libsecril-client
+LOCAL_VENDOR_MODULE := true
+
+include $(BUILD_SHARED_LIBRARY)
-- 
2.45.2

